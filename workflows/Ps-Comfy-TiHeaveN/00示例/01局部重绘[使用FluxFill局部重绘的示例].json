{"id":"551d82b0-b1fb-483a-a5ea-564bdb813625","revision":0,"last_node_id":51,"last_link_id":108,"nodes":[{"id":26,"type":"FluxGuidance","pos":[120,230],"size":[317.3999938964844,58],"flags":{},"order":8,"mode":0,"inputs":[{"label":"条件","localized_name":"条件","name":"conditioning","type":"CONDITIONING","link":41},{"localized_name":"引导","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"label":"条件","localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[80]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"FluxGuidance","ue_properties":{"widget_ue_connectable":{},"version":"7.3","input_ue_unconnectable":{}}},"widgets_values":[30]},{"id":46,"type":"ConditioningZeroOut","pos":[120,330],"size":[197.712890625,26],"flags":{},"order":9,"mode":0,"inputs":[{"label":"条件","localized_name":"条件","name":"conditioning","type":"CONDITIONING","link":101}],"outputs":[{"label":"条件","localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","links":[102]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"ConditioningZeroOut","ue_properties":{"widget_ue_connectable":{},"version":"7.3","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":39,"type":"DifferentialDiffusion","pos":[110,-120],"size":[277.20001220703125,58],"flags":{},"order":6,"mode":0,"inputs":[{"label":"模型","localized_name":"模型","name":"model","type":"MODEL","link":85},{"localized_name":"强度","name":"strength","shape":7,"type":"FLOAT","widget":{"name":"strength"},"link":null}],"outputs":[{"label":"模型","localized_name":"模型","name":"MODEL","type":"MODEL","slot_index":0,"links":[86]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"DifferentialDiffusion","ue_properties":{"widget_ue_connectable":{},"version":"7.3","input_ue_unconnectable":{}}},"widgets_values":[1]},{"id":34,"type":"DualCLIPLoader","pos":[-240,50],"size":[315,130],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"CLIP1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"CLIP2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"类型","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"设备","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"label":"CLIP","localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[62]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"DualCLIPLoader","models":[{"name":"clip_l.safetensors","url":"https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/clip_l.safetensors","directory":"text_encoders"},{"name":"t5xxl_fp16.safetensors","url":"https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp16.safetensors","directory":"text_encoders"}],"ue_properties":{"widget_ue_connectable":{},"version":"7.3","input_ue_unconnectable":{}}},"widgets_values":["clip_l.safetensors","t5xxl_fp8_e4m3fn.safetensors","flux","default"]},{"id":32,"type":"VAELoader","pos":[-240,220],"size":[315,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"vae名称","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[60,82]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"VAELoader","models":[{"name":"ae.safetensors","url":"https://huggingface.co/Comfy-Org/Lumina_Image_2.0_Repackaged/resolve/main/split_files/vae/ae.safetensors","directory":"vae"}],"ue_properties":{"widget_ue_connectable":{},"version":"7.3","input_ue_unconnectable":{}}},"widgets_values":["ae.safetensors"]},{"id":23,"type":"CLIPTextEncode","pos":[120,30],"size":[422.8500061035156,164.30999755859375],"flags":{},"order":5,"mode":0,"inputs":[{"label":"CLIP","localized_name":"clip","name":"clip","type":"CLIP","link":62},{"localized_name":"文本","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"label":"条件","localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[41,101]}],"title":"#01 提示词 可串接翻译节点","properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"CLIPTextEncode","ue_properties":{"widget_ue_connectable":{},"version":"7.3","input_ue_unconnectable":{}},"sdppp_widgetable_title":"#01 提示词 可串接翻译节点"},"widgets_values":[""],"color":"#232","bgcolor":"#353"},{"id":38,"type":"InpaintModelConditioning","pos":[120,420],"size":[302.3999938964844,138],"flags":{},"order":10,"mode":0,"inputs":[{"label":"正面条件","localized_name":"正面条件","name":"positive","type":"CONDITIONING","link":80},{"label":"负面条件","localized_name":"负面条件","name":"negative","type":"CONDITIONING","link":102},{"label":"VAE","localized_name":"vae","name":"vae","type":"VAE","link":82},{"label":"图像","localized_name":"像素","name":"pixels","type":"IMAGE","link":99},{"label":"遮罩","localized_name":"遮罩","name":"mask","type":"MASK","link":100},{"localized_name":"噪波遮罩","name":"noise_mask","type":"BOOLEAN","widget":{"name":"noise_mask"},"link":null}],"outputs":[{"label":"正面条件","localized_name":"正面条件","name":"positive","type":"CONDITIONING","slot_index":0,"links":[77]},{"label":"负面条件","localized_name":"负面条件","name":"negative","type":"CONDITIONING","slot_index":1,"links":[78]},{"label":"Latent","localized_name":"Latent","name":"latent","type":"LATENT","slot_index":2,"links":[88]}],"title":"#02 内补模型条件","properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"InpaintModelConditioning","ue_properties":{"widget_ue_connectable":{},"version":"7.3","input_ue_unconnectable":{}},"sdppp_widgetable_title":"#02 内补模型条件"},"widgets_values":[true]},{"id":3,"type":"KSampler","pos":[580,-120],"size":[290,470],"flags":{},"order":11,"mode":0,"inputs":[{"label":"模型","localized_name":"模型","name":"model","type":"MODEL","link":86},{"label":"正面条件","localized_name":"正面条件","name":"positive","type":"CONDITIONING","link":77},{"label":"负面条件","localized_name":"负面条件","name":"negative","type":"CONDITIONING","link":78},{"label":"Latent","localized_name":"Latent图像","name":"latent_image","type":"LATENT","link":88},{"localized_name":"随机种","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"步数","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"CFG","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"采样器","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"调度器","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"降噪","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"label":"Latent","localized_name":"Latent","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"title":"#03 K采样器 [seed,denoise]","properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"KSampler","ue_properties":{"widget_ue_connectable":{},"version":"7.3","input_ue_unconnectable":{}},"sdppp_widgetable_title":"#03 K采样器 [seed,denoise]"},"widgets_values":[656821733471329,"randomize",20,1,"euler","normal",1]},{"id":8,"type":"VAEDecode","pos":[590,430],"size":[210,46],"flags":{},"order":12,"mode":0,"inputs":[{"label":"Latent","localized_name":"Latent","name":"samples","type":"LATENT","link":7},{"label":"VAE","localized_name":"vae","name":"vae","type":"VAE","link":60}],"outputs":[{"label":"图像","localized_name":"图像","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[107]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"VAEDecode","ue_properties":{"widget_ue_connectable":{},"version":"7.3","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":49,"type":"JoinImageWithAlpha","pos":[995.2093791654363,420.4111978557236],"size":[140,46],"flags":{},"order":13,"mode":0,"inputs":[{"label":"图像","localized_name":"图像","name":"image","type":"IMAGE","link":107},{"label":"透明遮罩","localized_name":"阿尔法","name":"alpha","type":"MASK","link":106}],"outputs":[{"label":"图像","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[108]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.44","Node name for S&R":"JoinImageWithAlpha","ue_properties":{"widget_ue_connectable":{},"version":"7.2.2","input_ue_unconnectable":{}}},"widgets_values":[]},{"id":50,"type":"GrowMaskWithBlur","pos":[613.8959519241729,610.7441978557234],"size":[292.748046875,246],"flags":{},"order":7,"mode":0,"inputs":[{"label":"遮罩","localized_name":"mask","name":"mask","type":"MASK","link":105},{"localized_name":"扩展","name":"expand","type":"INT","widget":{"name":"expand"},"link":null},{"localized_name":"扩展增量","name":"incremental_expandrate","type":"FLOAT","widget":{"name":"incremental_expandrate"},"link":null},{"localized_name":"倒角","name":"tapered_corners","type":"BOOLEAN","widget":{"name":"tapered_corners"},"link":null},{"localized_name":"反转输入","name":"flip_input","type":"BOOLEAN","widget":{"name":"flip_input"},"link":null},{"localized_name":"模糊半径","name":"blur_radius","type":"FLOAT","widget":{"name":"blur_radius"},"link":null},{"localized_name":"线性透明","name":"lerp_alpha","type":"FLOAT","widget":{"name":"lerp_alpha"},"link":null},{"localized_name":"腐蚀系数","name":"decay_factor","type":"FLOAT","widget":{"name":"decay_factor"},"link":null},{"localized_name":"fill_holes","name":"fill_holes","shape":7,"type":"BOOLEAN","widget":{"name":"fill_holes"},"link":null}],"outputs":[{"label":"遮罩","localized_name":"mask","name":"mask","type":"MASK","links":[106]},{"label":"反转遮罩","localized_name":"mask_inverted","name":"mask_inverted","type":"MASK","links":null}],"properties":{"aux_id":"ComfyUI-KJNodes","ver":"bb205d809b467307b8ec3bb1a22680a4873187f8","Node name for S&R":"GrowMaskWithBlur","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.3"}},"widgets_values":[0,0,false,true,0,1,1,false]},{"id":31,"type":"UNETLoader","pos":[-240,-80],"size":[315,82],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"UNET名称","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"剪枝类型","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"label":"模型","localized_name":"模型","name":"MODEL","type":"MODEL","slot_index":0,"links":[85]}],"title":"#01 UNET加载器","properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"UNETLoader","models":[{"name":"flux1-fill-dev.safetensors","url":"https://huggingface.co/Comfy-Org/flux1-dev/resolve/main/split_files/diffusion_models/flux1-fill-dev.safetensors","directory":"diffusion_models"}],"ue_properties":{"widget_ue_connectable":{},"version":"7.3","input_ue_unconnectable":{}},"sdppp_widgetable_title":"#01 UNET加载器"},"widgets_values":["flux1-fill-dev-fp8.safetensors","fp8_e4m3fn"]},{"id":17,"type":"LoadImage","pos":[-507.40999999999997,492.52999999999975],"size":[315,314],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"label":"图像","localized_name":"图像","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[99]},{"label":"遮罩","localized_name":"遮罩","name":"MASK","type":"MASK","slot_index":1,"links":[100,105]}],"title":"main","properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"LoadImage","ue_properties":{"widget_ue_connectable":{},"version":"7.3","input_ue_unconnectable":{}}},"widgets_values":["flux_fill_inpaint_example_input_image.png","image"]},{"id":47,"type":"PreviewImage","pos":[1403.2999519241719,268.67719785572376],"size":[299.72,398.68000000000006],"flags":{},"order":14,"mode":0,"inputs":[{"label":"图像","localized_name":"图像","name":"images","type":"IMAGE","link":108}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.68","Node name for S&R":"PreviewImage","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.3"}},"widgets_values":[]},{"id":51,"type":"MarkdownNote","pos":[-684.8715795350006,-49.45278724536549],"size":[396.88802083333337,322.2526041666667],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.3","input_ue_unconnectable":{}}},"widgets_values":["### 流程起点与终点\n - 与PS文档交互须以 “加载图像” 为起点(需命名为main)，“预览图像” 为终点；\n - 直接生图 建议暴露【宽高】给插件，以“预览图像” 为终点；\n\n### 节点暴露规则\n - 节点命名格式：#01 节点名 [参数1,参数2]（例：#01 K采样器 [seed,denoise]），插件仅显示指定参数（如随机种、降噪值）；\n\n- 若不指定参数（仅 #01 节点名），插件将显示整个节点的所有参数；\n\n- 建议：提前在 ComfyUI 中调试好工作流，仅暴露关键参数至插件；\n\n"],"color":"#432","bgcolor":"#653"}],"links":[[7,3,0,8,0,"LATENT"],[41,23,0,26,0,"CONDITIONING"],[60,32,0,8,1,"VAE"],[62,34,0,23,0,"CLIP"],[77,38,0,3,1,"CONDITIONING"],[78,38,1,3,2,"CONDITIONING"],[80,26,0,38,0,"CONDITIONING"],[82,32,0,38,2,"VAE"],[85,31,0,39,0,"MODEL"],[86,39,0,3,0,"MODEL"],[88,38,2,3,3,"LATENT"],[99,17,0,38,3,"IMAGE"],[100,17,1,38,4,"MASK"],[101,23,0,46,0,"CONDITIONING"],[102,46,0,38,1,"CONDITIONING"],[105,17,1,50,0,"MASK"],[106,50,0,49,1,"MASK"],[107,8,0,49,0,"IMAGE"],[108,49,0,47,0,"IMAGE"]],"groups":[{"id":1,"title":"Step 1 - Load models","bounding":[-250,-150,335,441.6000061035156],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"【主图】 应命名为main才能与Photoshop直接交互","bounding":[-548.8699999999997,357.1899999999997,620.56,535.5400061035157],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Step 3 - Prompt","bounding":[110,-40,442.8499755859375,409.6000061035156],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"终点使用【预览图像】才能返图给PS 不用暴露","bounding":[1333.075741334695,127.86191415803442,604.6399999999999,643.8600000000002],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.6830134553650712,"offset":[1351.7940192350015,438.68561584536513]},"frontendVersion":"1.29.2","VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true,"ue_links":[],"workflowRendererVersion":"LG"},"version":0.4}